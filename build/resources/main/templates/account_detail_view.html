<html>
    <head>
        <link rel="stylesheet" th:href="@{/css/all_pages.css}">
        <link rel="stylesheet" th:href="@{/css/account_detail_view.css}">
    </head>
    <body>
        <div class="table-block" th:each="accountEntry : ${accountDetailView.accountDetailBlocks}">
            <table>
                <thead>
                    <tr>
                        <label class="header-label" th:text="${accountEntry.key.accountName}"></label>
                    </tr>
                    <tr>
                        <th>Trans #</th>
                        <th>Description</th>
                        <th>Approved</th>
                        <th>Post Date</th>
                        <th>Debit</th>
                        <th>Credit</th>
                    </tr>
                </thead>
                <tbody>
                    <div class="year-block" th:each="yearEntry : ${accountEntry.value}">
                        <tr>
                            <td th:text="${yearEntry.key}"></td>
                        </tr>
                        <div class="month-block" th:each="monthEntry : ${yearEntry.value.monthBlocks}">
                            <tr>
                                <td th:text="${monthEntry.key}"></td>
                            </tr>
                            <tr class="entry-line" th:each="entryLine : ${monthEntry.value.accountDetailLines}"> <!-- ENTRIES START HERE -->
                                <td><a th:text="${entryLine.journalEntryID}" href="http://localhost:8080/general_ledger"></a></td>
                                <td th:text="${entryLine.description}"></td>
                                <td th:if="${entryLine.postSignature} != null" th:text="${entryLine.postSignature}"></td>
                                <td th:unless="${entryLine.postSignature} != null">Error</td>
                                <td th:text="${entryLine.postDate}"></td>
                                <td th:if="${entryLine.type} == 'D'" th:text="${entryLine.amount}"></td>
                                <td th:unless="${entryLine.type} != 'D'"></td>
                                <td th:if="${entryLine.type} == 'C'" th:text="${entryLine.amount}"></td>
                                <td th:unless="${entryLine.type} != 'C'"></td>
                            </tr>
                            <tr class="mtd-totals-line">
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>Totals:</td>
                                <td class="total" id="totalDebit" th:text="${monthEntry.value.totalDebits}">Err</td>
                                <td class="total" id="totalCredit" th:text="${monthEntry.value.totalCredits}">Err</td>
                            </tr>
                            <tr class="mtd-totals-line">
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td class="grand-total" id="monthGrandTotal" th:if="${monthEntry.value.grandTotalType} == 'D'" th:text="${monthEntry.value.grandTotal}"></td>
                                <td class="grand-total" id="monthGrandTotal" th:unless="${monthEntry.value.grandTotalType} == 'D'"></td>
                                <td class="grand-total" id="monthGrandTotal" th:if="${monthEntry.value.grandTotalType} == 'C'" th:text="${monthEntry.value.grandTotal}"></td>
                                <td class="grand-total" id="monthGrandTotal" th:unless="${monthEntry.value.grandTotalType} == 'C'"></td>
                            </tr>
                        </div>
                        <tr class="ytd-totals-line">
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>YTD:</td>
                            <td class="total" id="yearTotalDebit" th:text="${yearEntry.value.totalDebits}">Err</td>
                            <td class="total" id="yearTotalCredit" th:text="${yearEntry.value.totalCredits}">Err</td>
                            </tr>
                        <tr class="ytd-totals-line">
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td class="grand-total" id="yearGrandTotal" th:if="${yearEntry.value.grandTotalType} == 'D'" th:text="${yearEntry.value.grandTotal}"></td>
                            <td class="grand-total" id="yearGrandTotal" th:unless="${yearEntry.value.grandTotalType} == 'D'"></td>
                            <td class="grand-total" id="yearGrandTotal" th:if="${yearEntry.value.grandTotalType} == 'C'" th:text="${yearEntry.value.grandTotal}"></td>
                            <td class="grand-total" id="yearGrandTotal" th:unless="${yearEntry.value.grandTotalType} == 'C'"></td>
                        </tr>
                    </div>
                    <tr class="grand-total-line">
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>Report Total:</td>
                        <td class="total" id="accountTotalDebit" th:text="${accountDetailView.totalDebits}">Err</td>
                        <td class="total" id="accountTotalCredit" th:text="${accountDetailView.totalCredits}">Err</td>
                    </tr>
                    <tr class="grand-total-line">
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td class="grand-total" id="accountGrandTotal" th:if="${accountDetailView.grandTotalType} == 'D'" th:text="${accountDetailView.grandTotal}"></td>
                        <td class="grand-total" id="accountGrandTotal" th:unless="${accountDetailView.grandTotalType} == 'D'"></td>
                        <td class="grand-total" id="accountGrandTotal" th:if="${accountDetailView.grandTotalType} == 'C'" th:text="${accountDetailView.grandTotal}"></td>
                        <td class="grand-total" id="accountGrandTotal" th:unless="${accountDetailView.grandTotalType} == 'C'"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </body>
</html>